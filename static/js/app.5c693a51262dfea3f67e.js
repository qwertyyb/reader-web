webpackJsonp([1],{103:function(t,e){},104:function(t,e){},107:function(t,e,n){"use strict";var i=n(4),a=n(108),r=n(109),s=n.n(r),o=n(169),c=n.n(o);i.default.use(a.a),e.a=new a.a({routes:[{path:"/",name:"index",component:s.a},{path:"/:id",name:"detail",component:c.a,props:!0}]})},109:function(t,e,n){n(110);var i=n(13)(n(111),n(168),null,null);t.exports=i.exports},110:function(t,e){},111:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(112),a=n.n(i),r=n(46),s=n.n(r),o=n(47),c=n.n(o),u=n(64),l=n.n(u),d=n(139),f=n.n(d),p=n(65),v=n.n(p),h=n(34),m=(n.n(h),n(71)),g=n.n(m),_=n(72),b={XC:2,DW:29};e.default={components:{List:f.a,Error:v.a},data:function(){return{xcList:[],xcTimestamp:0,error:!1,activatedTab:"xc",dwList:[],dwTimestamp:0}},computed:{sectionType:function(){return b[this.activatedTab.toUpperCase()]}},methods:{tabClicked:function(t){this[t.name+"List"].length||this.getStoryList(this.sectionType)},refresh:function(){this.getStoryList()},getStoryList:function(t){var e=this;return l()(s.a.mark(function n(){var i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=t||b.XC,i=e[e.activatedTab+"List"],n.abrupt("return",new c.a(function(){var n=l()(s.a.mark(function n(a,r){var o,c,u,l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.error=!1,o=i.length>0?{}:e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中",customClass:"loading"}),n.prev=2,n.next=5,Object(_.b)(e[e.activatedTab+"Timestamp"],t);case 5:c=n.sent,u=c.stories,l=JSON.parse(localStorage.visited||"[]"),u.forEach(function(t){t.visited=-1!==l.indexOf(t.id)}),i=i.concat(u),e[e.activatedTab+"List"]=i,e[e.activatedTab+"Timestamp"]=c.timestamp,o.close&&o.close(),a(!0),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(2),e.error=i.length<=0,o.close&&o.close(),r(n.t0);case 21:case"end":return n.stop()}},n,e,[[2,16]])}));return function(t,e){return n.apply(this,arguments)}}()));case 3:case"end":return n.stop()}},n,e)}))()},getMore:function(t){var e=this;return l()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getStoryList(e.sectionType);case 3:t&&t("success"),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),e.$notify.error({title:"错误",message:"获取信息错误"}),t&&t("fail");case 10:case"end":return n.stop()}},n,e,[[0,6]])}))()},routeToDetail:function(t){t.visited=!0;var e=JSON.parse(localStorage.visited||"[]");~e.indexOf(t.id)||(e.push(t.id),localStorage.visited=a()(e)),sessionStorage.scroll=Number(window.scrollY),sessionStorage.height=Number(document.body.offsetHeight),this.$router.push({path:"/"+t.id})}},activated:function(){var t=Number(sessionStorage.height||0),e=Number(sessionStorage.scroll||0),n=0,i=setInterval(function(){if(window.scrollY===e||n>10)return void clearInterval(i);n++,document.body.offsetHeight===t&&window.scrollTo(0,e)},500)},created:function(){g.a.init({sid:"500575360",autoReport:0,senseHash:1,senseQuery:1}),g.a.pgv()},mounted:function(){this.getStoryList()}}},139:function(t,e,n){n(140);var i=n(13)(n(141),n(146),"data-v-51498935",null);t.exports=i.exports},140:function(t,e){},141:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(142),a=n.n(i);e.default={components:{ListItem:a.a},data:function(){return{loadingStatus:"点击加载更多"}},props:{list:{type:Array,default:function(){return[]}},getMore:{type:Function,default:null}},methods:{changeLoadingStatus:function(t){"loading"===t?(this.loadingStatus="正在加载···",this.getMore(this.changeLoadingStatus)):"success"===t?this.loadingStatus="点击加载更多":"fail"===t&&(this.loadingStatus="加载失败")}}}},142:function(t,e,n){n(143);var i=n(13)(n(144),n(145),null,null);t.exports=i.exports},143:function(t,e){},144:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:function(){return{}}}}}},145:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["list-item",t.item.visited?"visited":""],on:{click:function(e){t.$emit("click")}}},[n("img",{staticClass:"picture",attrs:{src:t.item.images[0],alt:t.item.title}}),t._v(" "),n("div",{staticClass:"title-block"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.item.display_date))]),t._v(" "),n("p",{staticClass:"sub-title"},[t._v(t._s(t.item.title))])])])},staticRenderFns:[]}},146:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,i){return n("ListItem",{key:e.id,attrs:{item:e},on:{click:function(n){t.$emit("click",e,i)}}})}),t._v(" "),t.getMore&&t.list.length>0?n("p",{staticClass:"more",on:{click:function(e){t.changeLoadingStatus("loading")}}},[t._v(t._s(t.loadingStatus))]):t._e()],2)},staticRenderFns:[]}},147:function(t,e){},148:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Error",props:{action:{type:Function,default:function(){}}}}},149:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" "),n("p",{staticClass:"text"},[t._v("似乎出了点问题")]),t._v(" "),n("h3",{staticClass:"action",on:{click:t.action}},[t._v("重新加载")])])},staticRenderFns:[]}},168:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("Error",{attrs:{action:t.refresh}}):t._e(),t._v(" "),n("el-tabs",{staticClass:"tab-header",on:{"tab-click":t.tabClicked},model:{value:t.activatedTab,callback:function(e){t.activatedTab=e},expression:"activatedTab"}},[n("el-tab-pane",{attrs:{label:"瞎扯",name:"xc"}},[n("List",{staticClass:"list-com",attrs:{list:t.xcList,"get-more":t.getMore},on:{click:t.routeToDetail}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"大误",name:"dw"}},[n("List",{staticClass:"list-com",attrs:{list:t.dwList,"get-more":t.getMore},on:{click:t.routeToDetail}})],1)],1)],1)},staticRenderFns:[]}},169:function(t,e,n){n(170);var i=n(13)(n(171),n(205),null,null);t.exports=i.exports},170:function(t,e){},171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(46),a=n.n(i),r=n(64),s=n.n(r),o=n(34),c=(n.n(o),n(65)),u=n.n(c),l=n(71),d=n.n(l),f=n(72),p=n(172);e.default={name:"story_detail",components:{Error:u.a},data:function(){return{content:"",error:!1,title:""}},props:{id:{type:String,default:0}},watch:{id:function(t){var e=this;return s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Number(t)<0)){n.next=2;break}return n.abrupt("return");case 2:d.a.pgv(),e.getStory(t),window.scrollTo(0,0);case 5:case"end":return n.stop()}},n,e)}))()}},methods:{refresh:function(){this.getStory(this.id)},getStory:function(t){var e=this;return s()(a.a.mark(function n(){var i,r,s,o,c;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.error=!1,i=e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中",customClass:"loading"}),n.prev=2,n.next=5,Object(f.a)(t);case 5:r=n.sent,e.title=r.title,s='<div class="img-place-holder"></div>',o='<div class="img-place-holder">        <img src='+r.image+' />        <h1 class="headline-title">'+r.title+'</h1>        <span class="img-source">图片：'+r.image_source+"</span>        </div>",c=r.body.replace(s,o),c=c.replace(/src=\"http:/g,'src="'),e.content=c,i.close(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),i.close(),e.error=!0;case 19:case"end":return n.stop()}},n,e,[[2,15]])}))()},routeBack:function(){this.$router.back()},sharePage:function(){new p.a({title:this.title,desc:"来自知乎日报",link:location.href}).call("qqFriend")}},created:function(){d.a.init({sid:"500575360",autoReport:1,senseHash:1}),this.getStory(this.id)},mounted:function(){window.scrollTo(0,0)}}},172:function(t,e,n){"use strict";var i=n(73),a=n.n(i),r=n(175),s=n.n(r),o=n(176),c=n.n(o),u=n(180),l=n.n(u),d=n(192),f=n.n(d),p=n(196),v=n.n(p),h=n(204),m=n.n(h),g=function(t){function e(){return s()(this,e),l()(this,(e.__proto__||a()(e)).apply(this,arguments))}return v()(e,t),c()(e,[{key:"call",value:function(t,n){try{f()(e.prototype.__proto__||a()(e.prototype),"call",this).call(this,t,n)}catch(t){navigator.share&&navigator.share({title:n.title,text:n.desc,url:n.link})}}}]),e}(m.a);e.a=g},205:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("Error",{attrs:{action:t.refresh}}):[n("div",{staticClass:"title"},[n("i",{staticClass:"icon-back el-icon-back",on:{click:t.routeBack}}),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("i",{staticClass:"icon-share el-icon-share",on:{click:t.sharePage}})]),t._v(" "),n("main",{staticClass:"detail-container",attrs:{id:"detail"},domProps:{innerHTML:t._s(t.content)}})]],2)},staticRenderFns:[]}},206:function(t,e,n){n(207);var i=n(13)(n(208),n(209),null,null);t.exports=i.exports},207:function(t,e){},208:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Views",data:function(){return{activeName:"xc"}}}},209:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("div",{staticClass:"main-content"},[n("transition",{attrs:{name:"detail"===t.$route.name?"slide-left":"slide-right"}},[n("keep-alive",[n("router-view")],1)],1)],1)])},staticRenderFns:[]}},65:function(t,e,n){n(147);var i=n(13)(n(148),n(149),null,null);t.exports=i.exports},72:function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o("/api/3/section/"+e+"/before/"+t)}function a(t){return o("/api/4/news/"+t)}e.b=i,e.a=a;var r=n(34),s=n.n(r),o=function(t){return s.a.get("https://proxy.qwertyyb.cn/news-at"+t).then(function(t){return t.data})}},78:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(79),a=(n.n(i),n(81)),r=n.n(a),s=n(87),o=(n.n(s),n(88)),c=n.n(o),u=n(89),l=(n.n(u),n(90)),d=n.n(l),f=n(92),p=(n.n(f),n(93)),v=n.n(p),h=n(94),m=(n.n(h),n(95)),g=n.n(m),_=n(96),b=(n.n(_),n(97)),y=n.n(b),x=n(103),k=(n.n(x),n(104)),w=(n.n(k),n(105)),S=n.n(w),C=n(4),T=n(107),L=n(206),$=n.n(L);n(210).install(),C.default.config.productionTip=!1,C.default.use(S.a),C.default.use(y.a),C.default.use(g.a),C.default.use(v.a),C.default.use(d.a),C.default.use(c.a),C.default.prototype.$notify=r.a,C.default.prototype.$loading=g.a.service,new C.default({el:"#app",router:T.a,components:{Views:$.a}})},79:function(t,e){},87:function(t,e){},89:function(t,e){},92:function(t,e){},94:function(t,e){},96:function(t,e){}},[78]);
//# sourceMappingURL=app.5c693a51262dfea3f67e.js.map