webpackJsonp([1],{130:function(t,e,n){n(131);var a=n(6)(n(132),n(137),"data-v-51498935",null);t.exports=a.exports},131:function(t,e){},132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(133),i=n.n(a);e.default={components:{ListItem:i.a},data:function(){return{loadingStatus:"点击加载更多"}},props:{list:{type:Array,default:function(){return[]}},getMore:{type:Function,default:null}},methods:{changeLoadingStatus:function(t){"loading"===t?(this.loadingStatus="正在加载···",this.getMore(this.changeLoadingStatus)):"success"===t?this.loadingStatus="点击加载更多":"fail"===t&&(this.loadingStatus="加载失败")}}}},133:function(t,e,n){n(134);var a=n(6)(n(135),n(136),null,null);t.exports=a.exports},134:function(t,e){},135:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:function(){return{}}}}}},136:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["list-item",t.item.visited?"visited":""],on:{click:function(e){t.$emit("click")}}},[n("img",{staticClass:"picture",attrs:{src:t.item.images[0],alt:t.item.title}}),t._v(" "),n("div",{staticClass:"title-block"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.item.display_date))]),t._v(" "),n("p",{staticClass:"sub-title"},[t._v(t._s(t.item.title))])])])},staticRenderFns:[]}},137:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,a){return n("ListItem",{key:e.id,attrs:{item:e},on:{click:function(n){t.$emit("click",e,a)}}})}),t._v(" "),t.getMore&&t.list.length>0?n("p",{staticClass:"more",on:{click:function(e){t.changeLoadingStatus("loading")}}},[t._v(t._s(t.loadingStatus))]):t._e()],2)},staticRenderFns:[]}},138:function(t,e){},139:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Error",props:{action:{type:Function,default:function(){}}}}},140:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" "),n("p",{staticClass:"text"},[t._v("似乎出了点问题")]),t._v(" "),n("h3",{staticClass:"action",on:{click:t.action}},[t._v("重新加载")])])},staticRenderFns:[]}},159:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("Error",{attrs:{action:t.refresh}}):t._e(),t._v(" "),n("el-tabs",{staticClass:"tab-header",on:{"tab-click":t.tabClicked},model:{value:t.activatedTab,callback:function(e){t.activatedTab=e},expression:"activatedTab"}},[n("el-tab-pane",{attrs:{label:"瞎扯",name:"xc"}},[n("List",{staticClass:"list-com",attrs:{list:t.xcList,"get-more":t.getMore},on:{click:t.routeToDetail}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"大误",name:"dw"}},[n("List",{staticClass:"list-com",attrs:{list:t.dwList,"get-more":t.getMore},on:{click:t.routeToDetail}})],1)],1)],1)},staticRenderFns:[]}},160:function(t,e,n){n(161);var a=n(6)(n(162),n(163),null,null);t.exports=a.exports},161:function(t,e){},162:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(33),i=n.n(a),r=n(49),s=n.n(r),o=n(25),c=(n.n(o),n(50)),u=n.n(c),l=n(56),d=n.n(l),f=n(57);e.default={name:"story_detail",components:{Error:u.a},data:function(){return{content:"",error:!1,title:""}},props:{id:{type:String,default:0}},watch:{id:function(t){var e=this;return s()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Number(t)<0)){n.next=2;break}return n.abrupt("return");case 2:d.a.pgv(),e.getStory(t),window.scrollTo(0,0);case 5:case"end":return n.stop()}},n,e)}))()}},methods:{refresh:function(){this.getStory(this.id)},getStory:function(t){var e=this;return s()(i.a.mark(function n(){var a,r,s,o,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.error=!1,a=e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中",customClass:"loading"}),n.prev=2,n.next=5,Object(f.a)(t);case 5:r=n.sent,e.title=r.title,s='<div class="img-place-holder"></div>',o='<div class="img-place-holder">        <img src='+r.image+' />        <h1 class="headline-title">'+r.title+'</h1>        <span class="img-source">图片：'+r.image_source+"</span>        </div>",c=r.body.replace(s,o),c=c.replace(/src=\"http:/g,'src="'),e.content=c,a.close(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),a.close(),e.error=!0;case 19:case"end":return n.stop()}},n,e,[[2,15]])}))()},routeBack:function(){this.$router.back()},sharePage:function(){navigator.share?navigator.share({title:this.title,text:"来自知乎日报",url:location.href}):alert("不能分享")}},created:function(){d.a.init({sid:"500575360",autoReport:1,senseHash:1}),this.getStory(this.id)},mounted:function(){window.scrollTo(0,0)}}},163:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.error?n("Error",{attrs:{action:t.refresh}}):[n("div",{staticClass:"title"},[n("i",{staticClass:"icon-back el-icon-back",on:{click:t.routeBack}}),t._v(" "),n("h1",[t._v(t._s(t.title))]),t._v(" "),n("i",{staticClass:"icon-share el-icon-share",on:{click:t.sharePage}})]),t._v(" "),n("main",{staticClass:"detail-container",attrs:{id:"detail"},domProps:{innerHTML:t._s(t.content)}})]],2)},staticRenderFns:[]}},164:function(t,e,n){n(165);var a=n(6)(n(166),n(167),null,null);t.exports=a.exports},165:function(t,e){},166:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Views",data:function(){return{activeName:"xc"}}}},167:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("div",{staticClass:"main-content"},[n("transition",{attrs:{name:"detail"===t.$route.name?"slide-left":"slide-right"}},[n("keep-alive",[n("router-view")],1)],1)],1)])},staticRenderFns:[]}},50:function(t,e,n){n(138);var a=n(6)(n(139),n(140),null,null);t.exports=a.exports},57:function(t,e,n){"use strict";function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return o("http://news-at.zhihu.com/api/3/section/"+e+"/before/"+t)}function i(t){return o("http://news-at.zhihu.com/api/4/news/"+t)}e.b=a,e.a=i;var r=n(25),s=n.n(r),o=function(t){return s.a.get("https://bird.ioliu.cn/v1?url="+t).then(function(t){return t.data})}},58:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(59),i=(n.n(a),n(61)),r=n.n(i),s=n(67),o=(n.n(s),n(68)),c=n.n(o),u=n(69),l=(n.n(u),n(70)),d=n.n(l),f=n(72),p=(n.n(f),n(73)),v=n.n(p),h=n(74),m=(n.n(h),n(75)),g=n.n(m),b=n(76),_=(n.n(b),n(77)),x=n.n(_),y=n(83),w=(n.n(y),n(84)),k=(n.n(w),n(85)),S=n.n(k),C=n(3),T=n(87),L=n(164),$=n.n(L);n(168).install(),C.default.config.productionTip=!1,C.default.use(S.a),C.default.use(x.a),C.default.use(g.a),C.default.use(v.a),C.default.use(d.a),C.default.use(c.a),C.default.prototype.$notify=r.a,C.default.prototype.$loading=g.a.service,new C.default({el:"#app",router:T.a,components:{Views:$.a}})},59:function(t,e){},67:function(t,e){},69:function(t,e){},72:function(t,e){},74:function(t,e){},76:function(t,e){},83:function(t,e){},84:function(t,e){},87:function(t,e,n){"use strict";var a=n(3),i=n(88),r=n(89),s=n.n(r),o=n(160),c=n.n(o);a.default.use(i.a),e.a=new i.a({routes:[{path:"/",name:"index",component:s.a},{path:"/:id",name:"detail",component:c.a,props:!0}]})},89:function(t,e,n){n(90);var a=n(6)(n(91),n(159),null,null);t.exports=a.exports},90:function(t,e){},91:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(92),i=n.n(a),r=n(33),s=n.n(r),o=n(34),c=n.n(o),u=n(49),l=n.n(u),d=n(130),f=n.n(d),p=n(50),v=n.n(p),h=n(25),m=(n.n(h),n(56)),g=n.n(m),b=n(57),_={XC:2,DW:29};e.default={components:{List:f.a,Error:v.a},data:function(){return{xcList:[],xcTimestamp:0,error:!1,activatedTab:"xc",dwList:[],dwTimestamp:0}},computed:{sectionType:function(){return _[this.activatedTab.toUpperCase()]}},methods:{tabClicked:function(t){this[t.name+"List"].length||this.getStoryList(this.sectionType)},refresh:function(){this.getStoryList()},getStoryList:function(t){var e=this;return l()(s.a.mark(function n(){var a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=t||_.XC,a=e[e.activatedTab+"List"],n.abrupt("return",new c.a(function(){var n=l()(s.a.mark(function n(i,r){var o,c,u,l;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.error=!1,o=a.length>0?{}:e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中",customClass:"loading"}),n.prev=2,n.next=5,Object(b.b)(e[e.activatedTab+"Timestamp"],t);case 5:c=n.sent,u=c.stories,l=JSON.parse(localStorage.visited||"[]"),u.forEach(function(t){t.visited=-1!==l.indexOf(t.id)}),a=a.concat(u),e[e.activatedTab+"List"]=a,e[e.activatedTab+"Timestamp"]=c.timestamp,o.close&&o.close(),i(!0),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(2),e.error=a.length<=0,o.close&&o.close(),r(n.t0);case 21:case"end":return n.stop()}},n,e,[[2,16]])}));return function(t,e){return n.apply(this,arguments)}}()));case 3:case"end":return n.stop()}},n,e)}))()},getMore:function(t){var e=this;return l()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getStoryList(e.sectionType);case 3:t&&t("success"),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),e.$notify.error({title:"错误",message:"获取信息错误"}),t&&t("fail");case 10:case"end":return n.stop()}},n,e,[[0,6]])}))()},routeToDetail:function(t){t.visited=!0;var e=JSON.parse(localStorage.visited||"[]");~e.indexOf(t.id)||(e.push(t.id),localStorage.visited=i()(e)),sessionStorage.scroll=Number(window.scrollY),sessionStorage.height=Number(document.body.offsetHeight),this.$router.push({path:"/"+t.id})}},activated:function(){var t=Number(sessionStorage.height||0),e=Number(sessionStorage.scroll||0),n=0,a=setInterval(function(){if(window.scrollY===e||n>10)return void clearInterval(a);n++,document.body.offsetHeight===t&&window.scrollTo(0,e)},500)},created:function(){g.a.init({sid:"500575360",autoReport:0,senseHash:1,senseQuery:1}),g.a.pgv()},mounted:function(){this.getStoryList()}}}},[58]);
//# sourceMappingURL=app.b06d5d8bf8f178feccb5.js.map