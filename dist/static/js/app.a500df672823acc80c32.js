webpackJsonp([1],{115:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Views",data:function(){return{activeName:"xc"}},watch:{$route:function(t,e){if("detail"===t.name&&"index"===e.name)localStorage.scroll=document.body.scrollTop,localStorage.docHeight=document.body.offsetHeight;else if("index"===t.name&&"detail"===e.name&&localStorage.scroll&&localStorage)var n=!1,a=Number(localStorage.docHeight),i=0,s=setInterval(function(){if(n||i>10)return void clearInterval(s);i++,document.body.offsetHeight===a&&(document.body.scrollTop=Number(localStorage.scroll),n=!0)},200)}}}},116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(46),i=n.n(a),s=n(45),r=n.n(s),o=n(39),c=n.n(o);e.default={name:"story_detail",data:function(){return{content:""}},props:{id:{type:String,default:0}},watch:{id:function(t){Number(t)<0||(this.getStory(t),document.body.scrollTop=0)}},methods:{getStory:function(t){var e=this;return r()(i.a.mark(function n(){var a,s,r,o,l,u;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.$loading({target:".detail-container",body:!0,lock:!0}),n.prev=1,n.next=4,c.a.get("https://bird.ioliu.cn/v1?url=http://news-at.zhihu.com/api/4/news/"+t);case 4:s=n.sent,r=s.data,o='<div class="img-place-holder"></div>',l='<div class="img-place-holder">        <img src='+r.image+' />        <h1 class="headline-title">'+r.title+'</h1>        <span class="img-source">图片：'+r.image_source+"</span>        </div>",u=r.body.replace(o,l),u=u.replace(/src=\"http:/g,'src="'),e.content=u,a.close(),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),a.close(),e.$notify.error({title:"错误",message:"遇到错误"});case 18:case"end":return n.stop()}},n,e,[[1,14]])}))()}},created:function(){console.log(this.$router),this.getStory(this.id)},mounted:function(){document.body.scrollTop=0}}},117:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(185),i=n.n(a);e.default={components:{ListItem:i.a},data:function(){return{loadingStatus:"点击加载更多"}},props:{list:{type:Array,default:function(){return[]}},getMore:{type:Function,default:null}},methods:{changeLoadingStatus:function(t){"loading"===t?(this.loadingStatus="正在加载···",this.getMore(this.changeLoadingStatus)):"success"===t?this.loadingStatus="点击加载更多":"fail"===t&&(this.loadingStatus="加载失败")}}}},118:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:function(){return{}}}}}},119:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(46),i=n.n(a),s=n(45),r=n.n(s),o=n(184),c=n.n(o),l=n(39),u=n.n(l),d=n(70),f=n.n(d);e.default={components:{List:c.a,Detail:f.a},data:function(){return{xcList:[],xcTimestamp:0,curId:-1,showDetail:!1}},watch:{},methods:{getMore:function(t){var e=this;return r()(i.a.mark(function n(){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.a.get("https://bird.ioliu.cn/v1/?url=http://news-at.zhihu.com/api/3/section/2/before/"+e.xcTimestamp);case 3:a=n.sent,e.xcList=e.xcList.concat(a.data.stories),e.xcTimestamp=a.data.timestamp,t("success"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),t("fail"),e.$notify.error({title:"错误",message:"获取信息错误"});case 13:case"end":return n.stop()}},n,e,[[0,9]])}))()},getDetail:function(t){this.curId=t.id,this.showDetail=!0,this.$router.push({path:"/"+t.id})}},created:function(){var t=this;return r()(i.a.mark(function e(){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$loading({target:".list-com",body:!0,lock:!0}),e.prev=1,e.next=4,u.a.get("https://bird.ioliu.cn/v1/?url=http://news-at.zhihu.com/api/3/section/2");case 4:a=e.sent,t.xcList=a.data.stories,t.xcTimestamp=a.data.timestamp,n.close(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),n.close(),t.$notify.error({title:"错误",message:"获取信息错误"});case 14:case"end":return e.stop()}},e,t,[[1,10]])}))()}}},120:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),i=n(72),s=n(75),r=n.n(s),o=n(73),c=n.n(o),l=n(74);n.n(l);a.default.config.productionTip=!1,a.default.use(c.a),new a.default({el:"#app",router:i.a,components:{Views:r.a}})},174:function(t,e){},175:function(t,e){},176:function(t,e){},177:function(t,e){},178:function(t,e){},184:function(t,e,n){n(176);var a=n(15)(n(117),n(189),"data-v-51498935",null);t.exports=a.exports},185:function(t,e,n){n(178);var a=n(15)(n(118),n(191),null,null);t.exports=a.exports},186:function(t,e,n){n(177);var a=n(15)(n(119),n(190),null,null);t.exports=a.exports},187:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"detail-container"},[n("div",{domProps:{innerHTML:t._s(t.content)}})])},staticRenderFns:[]}},188:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("el-menu",{staticClass:"menu",attrs:{theme:"dark","default-active":"xc",mode:"horizontal"}},[n("el-menu-item",{staticClass:"menu-title",attrs:{index:"xc"}},[t._v("瞎扯")])],1),t._v(" "),n("div",{staticClass:"fixed-header-behind"}),t._v(" "),n("transition",{attrs:{name:"detail"===t.$route.name?"slide-left":"slide-right"}},[n("keep-alive",[n("router-view")],1)],1)],1)},staticRenderFns:[]}},189:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,a){return n("ListItem",{key:e.id,attrs:{item:e},on:{click:function(n){t.$emit("click",e,a)}}})}),t._v(" "),t.getMore?n("p",{staticClass:"more",on:{click:function(e){t.changeLoadingStatus("loading")}}},[t._v(t._s(t.loadingStatus))]):t._e()],2)},staticRenderFns:[]}},190:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("List",{staticClass:"list-com",attrs:{list:t.xcList,"get-more":t.getMore},on:{click:t.getDetail}})},staticRenderFns:[]}},191:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-item",on:{click:function(e){t.$emit("click")}}},[n("img",{staticClass:"picture",attrs:{src:t.item.images[0],alt:t.item.title}}),t._v(" "),n("div",{staticClass:"title-block"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.item.display_date))]),t._v(" "),n("p",{staticClass:"sub-title"},[t._v(t._s(t.item.title))])])])},staticRenderFns:[]}},70:function(t,e,n){n(174);var a=n(15)(n(116),n(187),null,null);t.exports=a.exports},72:function(t,e,n){"use strict";var a=n(2),i=n(192),s=n(186),r=n.n(s),o=n(70),c=n.n(o);a.default.use(i.a),e.a=new i.a({routes:[{path:"/",name:"index",component:r.a},{path:"/:id",name:"detail",component:c.a,props:!0}]})},74:function(t,e){},75:function(t,e,n){n(175);var a=n(15)(n(115),n(188),null,null);t.exports=a.exports}},[120]);
//# sourceMappingURL=app.a500df672823acc80c32.js.map