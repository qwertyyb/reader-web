webpackJsonp([1],{122:function(t,e,n){n(123);var r=n(6)(n(124),n(129),"data-v-51498935",null);t.exports=r.exports},123:function(t,e){},124:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(125),i=n.n(r);e.default={components:{ListItem:i.a},data:function(){return{loadingStatus:"点击加载更多"}},props:{list:{type:Array,default:function(){return[]}},getMore:{type:Function,default:null}},methods:{changeLoadingStatus:function(t){"loading"===t?(this.loadingStatus="正在加载···",this.getMore(this.changeLoadingStatus)):"success"===t?this.loadingStatus="点击加载更多":"fail"===t&&(this.loadingStatus="加载失败")}}}},125:function(t,e,n){n(126);var r=n(6)(n(127),n(128),null,null);t.exports=r.exports},126:function(t,e){},127:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:function(){return{}}}}}},128:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["list-item",t.item.visited?"visited":""],on:{click:function(e){t.$emit("click")}}},[n("img",{staticClass:"picture",attrs:{src:t.item.images[0],alt:t.item.title}}),t._v(" "),n("div",{staticClass:"title-block"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.item.display_date))]),t._v(" "),n("p",{staticClass:"sub-title"},[t._v(t._s(t.item.title))])])])},staticRenderFns:[]}},129:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,r){return n("ListItem",{key:e.id,attrs:{item:e},on:{click:function(n){t.$emit("click",e,r)}}})}),t._v(" "),t.getMore&&t.list.length>0?n("p",{staticClass:"more",on:{click:function(e){t.changeLoadingStatus("loading")}}},[t._v(t._s(t.loadingStatus))]):t._e()],2)},staticRenderFns:[]}},130:function(t,e,n){n(131);var r=n(6)(n(132),n(133),null,null);t.exports=r.exports},131:function(t,e){},132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Error",props:{action:{type:Function,default:function(){}}}}},133:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" "),n("p",{staticClass:"text"},[t._v("似乎出了点问题")]),t._v(" "),n("h3",{staticClass:"action",on:{click:t.action}},[t._v("重新加载")])])},staticRenderFns:[]}},152:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.error?n("Error",{attrs:{action:t.refresh}}):n("List",{staticClass:"list-com",attrs:{list:t.xcList,"get-more":t.getMore},on:{click:t.routeToDetail}})},staticRenderFns:[]}},153:function(t,e,n){n(154);var r=n(6)(n(155),n(156),null,null);t.exports=r.exports},154:function(t,e){},155:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=n.n(r),a=n(48),s=n.n(a),o=n(49),c=n.n(o);e.default={name:"story_detail",data:function(){return{content:""}},props:{id:{type:String,default:0}},watch:{id:function(t){var e=this;return s()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Number(t)<0)){n.next=2;break}return n.abrupt("return");case 2:e.getStory(t),window.scrollTo(0,0);case 4:case"end":return n.stop()}},n,e)}))()}},methods:{getStory:function(t){var e=this;return s()(i.a.mark(function n(){var r,a,s,o,u,l;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中"}),n.prev=1,n.next=4,c.a.get("https://bird.ioliu.cn/v1?url=http://news-at.zhihu.com/api/4/news/"+t);case 4:a=n.sent,s=a.data,o='<div class="img-place-holder"></div>',u='<div class="img-place-holder">        <img src='+s.image+' />        <h1 class="headline-title">'+s.title+'</h1>        <span class="img-source">图片：'+s.image_source+"</span>        </div>",l=s.body.replace(o,u),l=l.replace(/src=\"http:/g,'src="'),e.content=l,r.close(),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),r.close(),e.$notify.error({title:"错误",message:"遇到错误"});case 18:case"end":return n.stop()}},n,e,[[1,14]])}))()}},created:function(){this.getStory(this.id)},mounted:function(){window.scrollTo(0,0)}}},156:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("main",{staticClass:"detail-container",attrs:{id:"detail"},domProps:{innerHTML:t._s(t.content)}})},staticRenderFns:[]}},157:function(t,e,n){n(158);var r=n(6)(n(159),n(160),null,null);t.exports=r.exports},158:function(t,e){},159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Views",data:function(){return{activeName:"xc"}},watch:{$route:function(t,e){if("detail"===t.name&&"index"===e.name)localStorage.scroll=document.body.scrollTop,localStorage.docHeight=document.body.offsetHeight;else if("index"===t.name&&"detail"===e.name&&localStorage.scroll&&localStorage)var n=!1,r=Number(localStorage.docHeight),i=0,a=setInterval(function(){if(n||i>10)return void clearInterval(a);i++,document.body.offsetHeight===r&&(document.body.scrollTop=Number(localStorage.scroll),n=!0)},200)}}}},160:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("el-menu",{staticClass:"menu",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#fff","default-active":"xc",mode:"horizontal"}},[n("el-menu-item",{staticClass:"menu-title",attrs:{index:"xc"}},[t._v("瞎扯")])],1),t._v(" "),n("div",{staticClass:"main-content"},[n("transition",{attrs:{name:"detail"===t.$route.name?"slide-left":"slide-right"}},[n("keep-alive",[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]}},55:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=(n.n(r),n(58)),a=n.n(i),s=n(64),o=(n.n(s),n(65)),c=n.n(o),u=n(66),l=(n.n(u),n(67)),d=n.n(l),f=n(68),p=(n.n(f),n(69)),m=n.n(p),v=n(75),h=(n.n(v),n(76)),g=(n.n(h),n(77)),x=n.n(g),_=n(3),y=n(79),b=n(157),w=n.n(b);n(161).install(),_.default.config.productionTip=!1,_.default.use(x.a),_.default.use(m.a),_.default.use(d.a),_.default.use(c.a),_.default.prototype.$notify=a.a,_.default.prototype.$loading=d.a.service,new _.default({el:"#app",router:y.a,components:{Views:w.a}})},56:function(t,e){},64:function(t,e){},66:function(t,e){},68:function(t,e){},75:function(t,e){},76:function(t,e){},79:function(t,e,n){"use strict";var r=n(3),i=n(80),a=n(81),s=n.n(a),o=n(153),c=n.n(o);r.default.use(i.a),e.a=new i.a({routes:[{path:"/",name:"index",component:s.a},{path:"/:id",name:"detail",component:c.a,props:!0}]})},81:function(t,e,n){n(82);var r=n(6)(n(83),n(152),null,null);t.exports=r.exports},82:function(t,e){},83:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(84),i=n.n(r),a=n(32),s=n.n(a),o=n(33),c=n.n(o),u=n(48),l=n.n(u),d=n(122),f=n.n(d),p=n(130),m=n.n(p),v=n(49),h=n.n(v);e.default={components:{List:f.a,Error:m.a},data:function(){return{xcList:[],xcTimestamp:0,error:!1}},watch:{},methods:{refresh:function(){this.getStoryList()},getStoryList:function(){var t=this;return l()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new c.a(function(){var e=l()(s.a.mark(function e(n,r){var i,a,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.error=!1,i=t.xcList.length>0?{}:t.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中"}),e.prev=2,e.next=5,h.a.get("https://bird.ioliu.cn/v1/?url=http://news-at.zhihu.com/api/3/section/2/before/"+t.xcTimestamp);case 5:a=e.sent,o=a.data.stories,c=JSON.parse(localStorage.visited||"[]"),o.forEach(function(t){t.visited=-1!==c.indexOf(t.id)}),t.xcList=t.xcList.concat(o),t.xcTimestamp=a.data.timestamp,i.close&&i.close(),n(!0),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),t.error=t.xcList.length<=0,i.close&&i.close(),r(e.t0);case 20:case"end":return e.stop()}},e,t,[[2,15]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,t)}))()},getMore:function(t){var e=this;return l()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getStoryList();case 3:t&&t("success"),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),e.$notify.error({title:"错误",message:"获取信息错误"}),t&&t("fail");case 10:case"end":return n.stop()}},n,e,[[0,6]])}))()},routeToDetail:function(t){t.visited=!0;var e=JSON.parse(localStorage.visited||"[]");~e.indexOf(t.id)||(e.push(t.id),localStorage.visited=i()(e)),this.$router.push({path:"/"+t.id})}},mounted:function(){this.getStoryList()}}}},[55]);
//# sourceMappingURL=app.7076d8d0914999fc80c6.js.map