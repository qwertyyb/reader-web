webpackJsonp([1],{123:function(t,e,n){n(124);var r=n(6)(n(125),n(130),"data-v-51498935",null);t.exports=r.exports},124:function(t,e){},125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(126),i=n.n(r);e.default={components:{ListItem:i.a},data:function(){return{loadingStatus:"点击加载更多"}},props:{list:{type:Array,default:function(){return[]}},getMore:{type:Function,default:null}},methods:{changeLoadingStatus:function(t){"loading"===t?(this.loadingStatus="正在加载···",this.getMore(this.changeLoadingStatus)):"success"===t?this.loadingStatus="点击加载更多":"fail"===t&&(this.loadingStatus="加载失败")}}}},126:function(t,e,n){n(127);var r=n(6)(n(128),n(129),null,null);t.exports=r.exports},127:function(t,e){},128:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:function(){return{}}}}}},129:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["list-item",t.item.visited?"visited":""],on:{click:function(e){t.$emit("click")}}},[n("img",{staticClass:"picture",attrs:{src:t.item.images[0],alt:t.item.title}}),t._v(" "),n("div",{staticClass:"title-block"},[n("h3",{staticClass:"main-title"},[t._v(t._s(t.item.display_date))]),t._v(" "),n("p",{staticClass:"sub-title"},[t._v(t._s(t.item.title))])])])},staticRenderFns:[]}},130:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[t._l(t.list,function(e,r){return n("ListItem",{key:e.id,attrs:{item:e},on:{click:function(n){t.$emit("click",e,r)}}})}),t._v(" "),t.getMore&&t.list.length>0?n("p",{staticClass:"more",on:{click:function(e){t.changeLoadingStatus("loading")}}},[t._v(t._s(t.loadingStatus))]):t._e()],2)},staticRenderFns:[]}},131:function(t,e){},132:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Error",props:{action:{type:Function,default:function(){}}}}},133:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"error"},[n("i",{staticClass:"el-icon-refresh"}),t._v(" "),n("p",{staticClass:"text"},[t._v("似乎出了点问题")]),t._v(" "),n("h3",{staticClass:"action",on:{click:t.action}},[t._v("重新加载")])])},staticRenderFns:[]}},152:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.error?n("Error",{attrs:{action:t.refresh}}):n("List",{staticClass:"list-com",attrs:{list:t.xcList,"get-more":t.getMore},on:{click:t.routeToDetail}})},staticRenderFns:[]}},153:function(t,e,n){n(154);var r=n(6)(n(155),n(156),null,null);t.exports=r.exports},154:function(t,e){},155:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(32),i=n.n(r),s=n(48),a=n.n(s),o=n(50),c=n.n(o),u=n(49),l=n.n(u);e.default={name:"story_detail",components:{Error:l.a},data:function(){return{content:"",error:!1}},props:{id:{type:String,default:0}},watch:{id:function(t){var e=this;return a()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Number(t)<0)){n.next=2;break}return n.abrupt("return");case 2:e.getStory(t),window.scrollTo(0,0);case 4:case"end":return n.stop()}},n,e)}))()}},methods:{refresh:function(){this.getStory(this.id)},getStory:function(t){var e=this;return a()(i.a.mark(function n(){var r,s,a,o,u,l;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.error=!1,r=e.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中",customClass:"loading"}),n.prev=2,n.next=5,c.a.get("https://bird.ioliu.cn/v1?url=http://news-at.zhihu.com/api/4/news/"+t);case 5:s=n.sent,a=s.data,o='<div class="img-place-holder"></div>',u='<div class="img-place-holder">        <img src='+a.image+' />        <h1 class="headline-title">'+a.title+'</h1>        <span class="img-source">图片：'+a.image_source+"</span>        </div>",l=a.body.replace(o,u),l=l.replace(/src=\"http:/g,'src="'),e.content=l,r.close(),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(2),r.close(),e.error=!0;case 19:case"end":return n.stop()}},n,e,[[2,15]])}))()}},created:function(){this.getStory(this.id)},mounted:function(){window.scrollTo(0,0)}}},156:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.error?n("Error",{attrs:{action:t.refresh}}):n("main",{staticClass:"detail-container",attrs:{id:"detail"},domProps:{innerHTML:t._s(t.content)}})},staticRenderFns:[]}},157:function(t,e,n){n(158);var r=n(6)(n(159),n(160),null,null);t.exports=r.exports},158:function(t,e){},159:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"Views",data:function(){return{activeName:"xc"}}}},160:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("el-menu",{staticClass:"menu",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#fff","default-active":"xc",mode:"horizontal"}},[n("el-menu-item",{staticClass:"menu-title",attrs:{index:"xc"}},[t._v("瞎扯")])],1),t._v(" "),n("div",{staticClass:"block"}),t._v(" "),n("div",{staticClass:"main-content"},[n("transition",{attrs:{name:"detail"===t.$route.name?"slide-left":"slide-right"}},[n("keep-alive",[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]}},49:function(t,e,n){n(131);var r=n(6)(n(132),n(133),null,null);t.exports=r.exports},56:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),i=(n.n(r),n(59)),s=n.n(i),a=n(65),o=(n.n(a),n(66)),c=n.n(o),u=n(67),l=(n.n(u),n(68)),d=n.n(l),f=n(69),p=(n.n(f),n(70)),v=n.n(p),m=n(76),h=(n.n(m),n(77)),g=(n.n(h),n(78)),x=n.n(g),_=n(3),y=n(80),b=n(157),w=n.n(b);n(161).install(),_.default.config.productionTip=!1,_.default.use(x.a),_.default.use(v.a),_.default.use(d.a),_.default.use(c.a),_.default.prototype.$notify=s.a,_.default.prototype.$loading=d.a.service,new _.default({el:"#app",router:y.a,components:{Views:w.a}})},57:function(t,e){},65:function(t,e){},67:function(t,e){},69:function(t,e){},76:function(t,e){},77:function(t,e){},80:function(t,e,n){"use strict";var r=n(3),i=n(81),s=n(82),a=n.n(s),o=n(153),c=n.n(o);r.default.use(i.a),e.a=new i.a({routes:[{path:"/",name:"index",component:a.a},{path:"/:id",name:"detail",component:c.a,props:!0}]})},82:function(t,e,n){n(83);var r=n(6)(n(84),n(152),null,null);t.exports=r.exports},83:function(t,e){},84:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(85),i=n.n(r),s=n(32),a=n.n(s),o=n(33),c=n.n(o),u=n(48),l=n.n(u),d=n(123),f=n.n(d),p=n(49),v=n.n(p),m=n(50),h=n.n(m);e.default={components:{List:f.a,Error:v.a},data:function(){return{xcList:[],xcTimestamp:0,error:!1}},watch:{},methods:{refresh:function(){this.getStoryList()},getStoryList:function(){var t=this;return l()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new c.a(function(){var e=l()(a.a.mark(function e(n,r){var i,s,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.error=!1,i=t.xcList.length>0?{}:t.$loading({target:".main-content",body:!1,fullscreen:!1,lock:!0,text:"拼命加载中"}),e.prev=2,e.next=5,h.a.get("https://bird.ioliu.cn/v1/?url=http://news-at.zhihu.com/api/3/section/2/before/"+t.xcTimestamp);case 5:s=e.sent,o=s.data.stories,c=JSON.parse(localStorage.visited||"[]"),o.forEach(function(t){t.visited=-1!==c.indexOf(t.id)}),t.xcList=t.xcList.concat(o),t.xcTimestamp=s.data.timestamp,i.close&&i.close(),n(!0),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(2),t.error=t.xcList.length<=0,i.close&&i.close(),r(e.t0);case 20:case"end":return e.stop()}},e,t,[[2,15]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,t)}))()},getMore:function(t){var e=this;return l()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getStoryList();case 3:t&&t("success"),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),e.$notify.error({title:"错误",message:"获取信息错误"}),t&&t("fail");case 10:case"end":return n.stop()}},n,e,[[0,6]])}))()},routeToDetail:function(t){t.visited=!0;var e=JSON.parse(localStorage.visited||"[]");~e.indexOf(t.id)||(e.push(t.id),localStorage.visited=i()(e)),sessionStorage.scroll=Number(window.scrollY),sessionStorage.height=Number(document.body.offsetHeight),this.$router.push({path:"/"+t.id})}},activated:function(){var t=Number(sessionStorage.height||0),e=Number(sessionStorage.scroll||0),n=0,r=setInterval(function(){if(window.scrollY===e||n>10)return void clearInterval(r);n++,document.body.offsetHeight===t&&window.scrollTo(0,e)},500)},mounted:function(){this.getStoryList()}}}},[56]);
//# sourceMappingURL=app.4d8c9f0ca5b407cbad75.js.map